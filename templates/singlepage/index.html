<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <!-- Bootstrap core JS-->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
<!--    현재 로그인한 유저는 user.peson이며 프로필의 소유자는 person으로 알 수 있음
profile은 글 작성자의 프로필을 불러온다-->

    {% if profile.korName %}
    <title>{{ profile.korName }}님의 발자취</title>
    {% else %}
    <title>당신의 프로필을 만들어보세요!</title>
    {% endif %}
    <link rel="icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet"
          type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic"
          rel="stylesheet" type="text/css"/>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700&display=swap" rel="stylesheet">
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static 'css/styles.css' %}" rel="stylesheet"/>

    <!--    이미지 변경 팝업 JavaScripts-->
    <script>
        function popup(){
            var url = "https://ipfs.io/ipfs/{{profile.image_hash}}";
            var name = "popup test";
            var option = "width = 500, height = 500, top = 100, left = 200"
            window.open(url, name, option);
        }



    </script>
    <style>
      .spinner {
        animation: spin 2s linear infinite;
      }
      @keyframes spin {
        from {
          transform: rotate(0);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
</head>
<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark bg-third fixed-top" id="mainNav">
    {% if user.person.pk == person.pk %}

    <span class="d-block d-lg-none" style="font-weight:bold; color:white;">{{ profile.korName }}</span>
    {% if profile.image_hash%}
    <a class="navbar-brand js-scroll-trigger" href="javascript:popup()">
            <img class="img-fluid img-profile rounded-circle mx-auto mb-2"
                 src="https://ipfs.io/ipfs/{{profile.image_hash}}"/>
    </a>
    {% else %}
    <a class="navbar-brand js-scroll-trigger " href="#">
            <img class="img-fluid img-profile rounded-circle mx-auto mb-2"
             src="{% static 'assets/img/face.png' %}" alt="..."/>
            {% endif %}
        </a>
    {% else %}
    <div class="navbar-brand js-scroll-trigger">
        {% if profile.korName %}
        <span class="d-block d-lg-none">{{ profile.korName }}님의 발자취</span>
        {% else %}
        <span class="d-block d-lg-none">SEBAKO 가입을 환영합니다!</span>
        {% endif %}
        <span class="d-none d-lg-block">
            {% if profile.image_hash%}
            <img class="img-fluid img-profile rounded-circle mx-auto mb-2"
                 src="https://ipfs.io/ipfs/{{profile.image_hash}}"/></span>
        {% else %}
        <img class="img-fluid img-profile rounded-circle mx-auto mb-2"
             src="{% static 'assets/img/face.png' %}" alt="..."/></span>
        {% endif %}
        {% endif %}
    </div>


    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
            data-target="#navbarResponsive"
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span
            class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">About</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#certificate">Certificate </a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#experience">Experience</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#education">Education</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#awards">Awards</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#interests">Interests</a></li>
            <br><br>
            <li class="nav-item"><a style="float:center" class="nav-link" href="{% url 'accounts:logout' %}">로그아웃</a> <a style="float:center"
                                                                                               class="nav-link"
                                                                                               href="/">처음화면</a></li>
        </ul>

    </div>
</nav>
<!-- Page Content-->
<div class="container-fluid p-0">
    <!-- About-->
    <section class="resume-section" id="about">
        <div class="resume-section-content">
<!--            자기소개서를 작성했을 경우 -->
            {% if profile.korName %}
            <h1 class="mb-0" >
                {{ profile.korName }}
                {% if profile.engName %}
                <span class="text-primary">{{ profile.engName }}</span>
                {% endif %}
            </h1>
            <div class="subheading mb-5" style="font-size : 30px">
                {{ profile.address }}  {{ profile.phone }} 
                <a href="mailto:{{profile.email}}" >{{ profile.email }}</a>
            </div>
            <p class="lead mb-5" style="font-family: 'Noto Sans KR', sans-serif; font-weight : 500; font-size : 23px">
                지갑주소 : <a href="https://ropsten.etherscan.io/address/{{person.user}}">{{person.user}}</a> </p>
            <br><br><br>
            <div class="social-icons">
                <!--                        소셜 주소가 있을경우 우리는 github만 사용-->
                {% if profile.insta %}
                <a class="social-icon"  href="{{profile.insta}}"><i class="fab fa-instagram"></i></a>
                {% else %}
                <a class="social-icon disableLink" style="background-color:#E6E6E6;"><i class="fab fa-instagram"></i></a>
                {% endif %}
                {% if profile.github %}
                <a class="social-icon " href="{{profile.github}}"><i class="fab fa-github"></i></a>
                {% else %}
                <a class="social-icon disableLink" style="background-color:#E6E6E6;"><i class="fab fa-github"></i></a>
                {% endif %}
                {% if profile.blog %}
                <a class="social-icon" href="{{profile.blog}}"><i class="fab fa-twitter"></i></a>
                {% else %}
                <a class="social-icon disableLink" style="background-color:#E6E6E6;"><i class="fab fa-twitter"></i></a>
                {% endif %}
                {% if profile.facebook %}
                <a class="social-icon"  href="{{profile.facebook}}"><i class="fab fa-facebook-f"></i></a>
                {% else %}
                <a class="social-icon disableLink" style="background-color:#E6E6E6;"><i class="fab fa-facebook-f"></i></a>
                {% endif %}
            </div>
            <br>
            <br>
            {% if user.person.pk == person.pk %}
            <a type="button" class="btn btn-primary" href="{% url 'singlepage:profile' pk=person.id %}">수정하기</a>
            {% else %}
            {% endif %}

<!--            처음 회원가입했을때 모습을 보여줌-->
            {% else %}
            <h2 class="mb-5" style="font-family: 'Noto Sans KR', sans-serif; font-weight : 700; font-size : 60px; line-height:140%">
                당신은 어떤 사람인가요?<br>
                <span class="text-primary">프로필</span>을 작성해봅시다!😊
            </h2>
            <h4 class="text-secondary" style="font-family: 'Noto Sans KR', sans-serif; font-weight : 700; font-size : 30px; line-height:120%">
                인스타, 깃허브 주소도 함께 등록해보세요<br><br>
            </h4>
            <div class="social-icons">

                <!--                        소셜 주소가 있을경우 우리는 github만 사용-->
                <a class="social-icon disableLink" ><i class="fab fa-instagram"></i></a>
                <a class="social-icon disableLink" ><i class="fab fa-github"></i></a>
                <a class="social-icon disableLink" ><i class="fab fa-twitter"></i></a>
                <a class="social-icon disableLink" ><i class="fab fa-facebook-f"></i></a>
            </div>
            <br>
            <br>
            <br>
            {% if user.person.pk == person.pk %}
            <a type="button" class="btn btn-primary" href="{% url 'singlepage:profile' pk=person.id %}">시작하기</a>
            {% else %}
            {% endif %}

<!--            첫번째 페이즈 끝-->
            {% endif %}




        </div>
    </section>
    <hr class="m-0"/>
    <!--            certificate-->
    <section class="resume-section" id="certificate">
        <div class="resume-section-content">
            <h2 class="mb-5">자격증</h2>
            {% if resume_list.all %}
            {% for resume in resume_list.all %}
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0" style="font-weight:bold;">{{resume.title}}</h3>
                    <div class="subheading mb-3" style="font-weight:bold; margin-top:10px;">{{resume.issure}}</div>

                    <p style="font-weight:bold;">{{resume.regiNum}}</p>
                </div>
                <div class="col-md-2">
                    {% if resume.signature == 'True' %}
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Gnome-application-certificate.svg" style="width:auto; height:120px;">
                    {% endif %}
                    {% if resume.signature == 'False' %}
                    <img src="https://cdn.pixabay.com/photo/2020/06/02/12/02/rejected-5250678_960_720.png" style="width:auto; height:120px;">
                    {% endif %}
                    {% if resume.signature == '' %}
                    <i style="margin-top:19px;" class="fas fa-spinner fa-5x spinner"></i>
                    {% endif %}
                </div>
                <div class="flex-shrink-0">
                    <span class="text-primary" style="font-weight:bold">{{resume.dateAcq}}</span><br><br>
                    <p id="resume_id" hidden class="resume_id">{{resume.id}}</p>
<!--                    {% url 'singlepage:delete_resume' person.pk resume.id %}-->
                    <button class="delete{{resume.id}} mb-3 btn btn-primary white" >삭제하기</button>

                    <script>
                        $(document).ready(function(){
                            $(".delete{{resume.id}}").on('click', function() {
                                var conf = confirm("삭제하셔도 블록체인에 기록이 남습니다. \n정말로 삭제하시겠습니까?")
                                if(conf){
                                    location.href = '{% url 'singlepage:delete_resume' person.pk resume.id %}';
                                }
                                else{
                                    location.href;
                                }
                            });
                        });
                    </script>


                </div>



<!--                <div class="flex-shrink-0"><span class="text-primary">{{resume.dateAcq}} - Present</span></div>-->
            </div>
            <hr class="m-0"/>
            <br><br>
            {% endfor %}
            {% else %}
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0" style="font-weight:bold">자격증명</h3>
                    <div class="subheading mb-3" style="font-weight:bold; margin-top:10px;">자격증 발급처</div>
                    <p style="font-weight:bold;">당신의 이력서를 보다 안전하고 편리하게 관리해드립니다</p>
                </div>
                <div class="flex-shrink-0"><span class="text-primary" style="font-weight:bold;">자격증 취득일 20xx-xx</span></div>
            </div>
            {% endif %}
            <br>
            <br>
            <a type="button" class="btn btn-primary" href="{% url 'singlepage:addRESUME' pk=person.id %}">추가하기</a>
        </div>
    </section>
    <hr class="m-0"/>
    <!-- Experience-->
    <section class="resume-section" id="experience">
        <div class="resume-section-content">
            <h2 class="mb-5">경력</h2>
            {% if experience_list.all %}
            {% for experience in experience_list.all %}
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0" style="font-weight:bold;">{{experience.company}}</h3>
                    <div class="subheading mb-3" style="font-weight:bold; margin-top:10px;" >{{experience.title}}</div>
                    <p>{{experience.text}}</p>
                </div>
                <div class="col-md-0">
                    {% if experience.signature == 'True' %}
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Gnome-application-certificate.svg" style="width:auto; height:120px;">
                    {% endif %}
                    {% if experience.signature == 'False' %}
                    <img src="https://cdn.pixabay.com/photo/2020/06/02/12/02/rejected-5250678_960_720.png" style="width:auto; height:120px;">
                    {% endif %}
                    {% if experience.signature == '' %}
                    <i style="margin-top:19px;" class="fas fa-spinner fa-5x spinner"></i>
                    {% endif %}
                </div>
                <div class="flex-shrink-0"><span style="font-weight:bold;" class="text-primary">{{experience.dateFrom}} - {{experience.dateEnd}}</span><br><br>
                <button class="delete{{experience.id}} mb-3 btn btn-primary white" style="float:right;">삭제하기</button>

                    <script>
                        $(document).ready(function(){
                            $(".delete{{experience.id}}").on('click', function() {
                                var conf = confirm("삭제하셔도 블록체인에 기록이 남습니다. \n정말로 삭제하시겠습니까?")
                                if(conf){
                                    location.href = '{% url 'singlepage:delete_career' pk=person.pk career_id=experience.id %}';
                                }
                                else{
                                    location.href;
                                }
                            });
                        });
                    </script>
                    </div>
            </div>
            <hr class="m-0"/>
            <br><br>
            {% endfor %}
            {% else %}
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h5 class="mb-0">※예시입니다※</h5>
                    <h3 class="mb-0">Senior Web Developer</h3>
                    <div class="subheading mb-3">Intelitec Solutions</div>
                    <p>Bring to the table win-win survival strategies to ensure proactive domination. At the end of the
                        day, going forward, a new normal that has evolved from generation X is on the runway heading
                        towards a streamlined cloud solution. User generated content in real-time will have multiple
                        touchpoints for offshoring.</p>
                </div>
                <div class="flex-shrink-0"><span class="text-primary">March 2013 - Present</span></div>
            </div>
            {% endif %}
            <br>
            <br>
            <a type="button" class="btn btn-primary" href="{% url 'singlepage:addEXPER' pk=person.id %}">추가하기</a>
        </div>
    </section>
    <hr class="m-0"/>
    <!-- Education-->
    <section class="resume-section" id="education">
        <div class="resume-section-content">
            <h2 class="mb-5">학력</h2>
            {% if education_list.all %}
            {% for edu in education_list.all %}
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0" style="font-weight:bold;">{{edu.school}}</h3>
                    <div class="subheading mb-3" style="font-weight:bold; margin-top:10px;">{{edu.major}}</div>
                    <p style="font-weight:bold;">GPA: {{edu.GPA}}</p>
                </div>
                <div class="col-md-0">
                    {% if edu.signature == 'True' %}
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Gnome-application-certificate.svg" style="width:auto; height:120px;">
                    {% endif %}
                    {% if edu.signature == 'False' %}
                    <img src="https://cdn.pixabay.com/photo/2020/06/02/12/02/rejected-5250678_960_720.png" style="width:auto; height:120px;">
                    {% endif %}
                    {% if edu.signature == '' %}
                    <i style="margin-top:19px;" class="fas fa-spinner fa-5x spinner"></i>
                    {% endif %}
                </div>
                <div class="flex-shrink-0"><span style="font-weight:bold;" class="text-primary">{{edu.dateEnd}}</span><br>
                    <button class="delete{{edu.id}} mb-3 btn btn-primary white" style="float:right;">삭제하기</button>

                    <script>
                        $(document).ready(function(){
                            $(".delete{{edu.id}}").on('click', function() {
                                var conf = confirm("삭제하셔도 블록체인에 기록이 남습니다. \n정말로 삭제하시겠습니까?")
                                if(conf){
                                    location.href = '{% url 'singlepage:delete_edu' person.pk edu.id %}';
                                }
                                else{
                                    location.href;
                                }
                            });
                        });
                    </script>
                    </div>
            </div>
            <hr class="m-0"/>
            <br><br>
            {% endfor %}
            {% else %}
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h5 class="mb-0">※예시입니다※</h5>
                    <h3 class="mb-0">University of Colorado Boulder</h3>
                    <div class="subheading mb-3">Bachelor of Science</div>
                    <div>Computer Science - Web Development Track</div>
                    <p>GPA: 3.23</p>
                </div>
                <div class="flex-shrink-0"><span class="text-primary">August 2006 - May 2010</span></div>
            </div>
            {% endif %}
            <br>
            <br>
            <a type="button" class="btn btn-primary" href="{% url 'singlepage:addEDU' pk=person.id %}">추가하기</a>
        </div>
    </section>
    <hr class="m-0"/>
    <!-- Awards-->
    <section class="resume-section" id="awards">
        <div class="resume-section-content">
            <h2 class="mb-5">수상경력</h2>
            <ul class="fa-ul mb-0">
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    Google Analytics Certified Developer
                </li>
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    Mobile Web Specialist - Google Certification
                </li>
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    1
                    <sup>st</sup>
                    Place - University of Colorado Boulder - Emerging Tech Competition 2009
                </li>
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    1
                    <sup>st</sup>
                    Place - University of Colorado Boulder - Adobe Creative Jam 2008 (UI Design Category)
                </li>
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    2
                    <sup>nd</sup>
                    Place - University of Colorado Boulder - Emerging Tech Competition 2008
                </li>
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    1
                    <sup>st</sup>
                    Place - James Buchanan High School - Hackathon 2006
                </li>
                <li>
                    <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                    3
                    <sup>rd</sup>
                    Place - James Buchanan High School - Hackathon 2005
                </li>
            </ul>
            <br>
            <br>
            <a type="button" class="btn btn-primary" href="#">수정하기</a>
        </div>
    </section>
    <hr class="m-0"/>
    <!-- Interests-->
    <section class="resume-section" id="interests">
        <div class="resume-section-content">
            <h2 class="mb-5">취미/관심</h2>
            <p style="font-weight:bold">방문해주셔서 감사합니다</p>
            <p class="mb-0" style="font-weight:bold">이더리움 블록체인 네트워크에 당신의 포트폴리오를 등록 및 검증해보세요!!</p>
            <br>
            <br>
            <a type="button" class="btn btn-primary" href="{% url 'singlepage:addIntro' pk=person.id %}">수정하기</a>
        </div>
    </section>
    <hr class="m-0"/>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Third party plugin JS-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<!-- Core theme JS-->
<script src="{% static 'js/scripts.js' %}"></script>
<!--web3 JS-->
<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js" integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>
<script src="{% static 'js/web3auth.js' %}"></script>
</body>
</html>
